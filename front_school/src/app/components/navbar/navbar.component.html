<nav class="bg-white shadow-md px-4 py-3 flex justify-between items-center">
  <!-- Logo -->
  <div class="text-xl font-bold text-blue-600">
    <i class="fas fa-school text-blue-500 mr-2"></i> School Portail
  </div>

  <!-- Menu burger (mobile) -->
  <button class="md:hidden text-gray-700 text-2xl" (click)="toggleMenu()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Menu principal -->
  <ul
    class="md:flex gap-6 text-gray-700 font-medium items-center"
    [ngClass]="{
      hidden: !isMenuOpen,
      flex: isMenuOpen,
      'flex-col': isMenuOpen,
      'md:flex-row': true,
      'mt-4': isMenuOpen
    }"
  >
    <!-- Admin -->
    <li *ngIf="role === 'admin'">
      <a routerLink="/dashboard" class="hover:text-blue-600">
        <i class="fas fa-tachometer-alt mr-1"></i> Dashboard
      </a>
    </li>

    <!-- Menu Utilisateur -->
    <li *ngIf="role === 'admin'" class="relative">
      <button
        (click)="toggleDropdown('users')"
        class="flex items-center hover:text-blue-600"
      >
        <i class="fas fa-users mr-1"></i> Utilisateurs
        <i class="fas fa-chevron-down ml-1 text-xs"></i>
      </button>

      <ul
        *ngIf="activeDropdown === 'users'"
        class="absolute left-0 mt-2 w-48 bg-white border rounded shadow-lg z-10"
      >
        <li>
          <a
            (click)="navigateAndClose('/gestion-utilisateurs/eleves')"
            class="block px-4 py-2 hover:bg-blue-100 text-gray-700"
          >
            <i class="fas fa-user-graduate mr-2"></i> Élèves
          </a>
        </li>
        <li>
          <a
            (click)="navigateAndClose('/gestion-utilisateurs/enseignants')"
            class="block px-4 py-2 hover:bg-blue-100 text-gray-700"
          >
            <i class="fas fa-chalkboard-teacher mr-2"></i> Enseignants
          </a>
        </li>
      </ul>
    </li>

    <!-- Menu Classes-->
    <li *ngIf="role === 'admin'">
      <a routerLink="/gestion-classes" class="hover:text-blue-600">
        <i class="fas fa-chalkboard mr-1"></i> Classes
      </a>
    </li>
    <li *ngIf="role === 'admin'">
      <a routerLink="/gestion-matieres" class="hover:text-blue-600">
        <i class="fas fa-book-open mr-1"></i> Matières
      </a>
    </li>

    <li *ngIf="role === 'admin'" class="relative">
      <button
        (click)="toggleDropdown('notes')"
        class="flex items-center hover:text-blue-600"
      >
        <i class="fas fa-file-alt mr-1"></i> Notes & Bulletins
        <i class="fas fa-chevron-down ml-1 text-xs"></i>
      </button>

      <ul
        *ngIf="activeDropdown === 'notes'"
        class="absolute left-0 mt-2 w-48 bg-white border rounded shadow-lg z-10"
      >
        <li>
          <a
            (click)="navigateAndClose('/suivi-scolaire/notes')"
            class="block px-4 py-2 hover:bg-blue-100 text-gray-700"
          >
            <i class="fas fa-clipboard-list mr-2"></i> Notes
          </a>
        </li>
        <li>
          <a
            (click)="navigateAndClose('/suivi-scolaire/bulletins')"
            class="block px-4 py-2 hover:bg-blue-100 text-gray-700"
          >
            <i class="fas fa-file-invoice mr-2"></i> Bulletins
          </a>
        </li>
      </ul>
    </li>

    <!-- Enseignant -->
    <li *ngIf="role === 'enseignant'">
      <a routerLink="/mes-classes" class="hover:text-blue-600">
        <i class="fas fa-users-class mr-1"></i> Mes Classes
      </a>
    </li>
    <li *ngIf="role === 'enseignant'">
      <a routerLink="/saisie-notes" class="hover:text-blue-600">
        <i class="fas fa-pen mr-1"></i> Saisie des Notes
      </a>
    </li>

    <!-- Élève / Tuteur -->
    <li *ngIf="role === 'eleve' || role === 'tuteur'">
      <a routerLink="/mes-bulletins" class="hover:text-blue-600">
        <i class="fas fa-file-alt mr-1"></i> Mes Bulletins
      </a>
    </li>

    <!-- Déconnexion -->
    <li>
      <button
        (click)="logout()"
        class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition flex items-center gap-2"
      >
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </li>
  </ul>
</nav>
