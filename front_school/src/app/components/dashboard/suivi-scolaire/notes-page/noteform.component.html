<div class="max-w-6xl mx-auto">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">
      {{ textButtonVOUp }} une note
    </h1>
    <button
      type="button"
      (click)="onCancel()"
      class="px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50 transition"
    >
      <i class="fas fa-arrow-left mr-2"></i>Retour
    </button>
  </div>

  <form [formGroup]="noteForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <div class="bg-white p-6 rounded-lg shadow-sm border">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <i class="fas fa-clipboard-list mr-3 text-indigo-600"></i>
        Informations de la note
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Élève -->
        <div>
          <label
            for="eleve_id"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Élève</label
          >
          <input
            id="eleve_id"
            formControlName="eleve_id"
            type="number"
            placeholder="ID de l'élève"
            class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            [class.border-red-500]="
              tbErreurFront['eleve_id'].invalid &&
              tbErreurFront['eleve_id'].touched
            "
          />
          <div
            *ngIf="
              tbErreurFront['eleve_id'].invalid &&
              tbErreurFront['eleve_id'].touched
            "
            class="text-red-500 text-sm mt-1"
          >
            L'ID élève est requis.
          </div>
        </div>

        <!-- Matière -->
        <div *ngIf="matieres.length > 0; else noMatiereMessage">
          <label
            for="matiere_id"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Matière
          </label>
          <select
            id="matiere_id"
            formControlName="matiere_id"
            class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            [class.border-red-500]="
              tbErreurFront['matiere_id'].invalid &&
              tbErreurFront['matiere_id'].touched
            "
          >
            <option [ngValue]="null">-- Sélectionner une matière --</option>
            <option *ngFor="let matiere of matieres" [value]="matiere.id">
              {{ matiere.nom }}
            </option>
          </select>

          <div
            *ngIf="
              tbErreurFront['matiere_id'].invalid &&
              tbErreurFront['matiere_id'].touched
            "
            class="text-red-500 text-sm mt-1"
          >
            La matière est requise.
          </div>
        </div>

        <!-- Si aucune matière -->
        <ng-template #noMatiereMessage>
          <div class="text-sm text-red-500 mt-1">
            {{ matiereVideMessage }}
          </div>
        </ng-template>

        <!-- Note -->
        <div>
          <label for="note" class="block text-sm font-medium text-gray-700 mb-1"
            >Note</label
          >
          <input
            id="note"
            formControlName="note"
            type="number"
            min="0"
            max="20"
            placeholder="Note sur 20"
            class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            [class.border-red-500]="
              tbErreurFront['note'].invalid && tbErreurFront['note'].touched
            "
          />
          <div
            *ngIf="
              tbErreurFront['note'].invalid && tbErreurFront['note'].touched
            "
            class="text-red-500 text-sm mt-1"
          >
            La note doit être entre 0 et 20.
          </div>
        </div>

        <!-- Période -->
        <div>
          <label
            for="periode"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Période</label
          >
          <input
            id="periode"
            formControlName="periode"
            type="text"
            placeholder="Ex: Trimestre 1"
            class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            [class.border-red-500]="
              tbErreurFront['periode'].invalid &&
              tbErreurFront['periode'].touched
            "
          />
          <div
            *ngIf="
              tbErreurFront['periode'].invalid &&
              tbErreurFront['periode'].touched
            "
            class="text-red-500 text-sm mt-1"
          >
            La période est requise.
          </div>
        </div>
      </div>
    </div>

    <!-- Bouton de soumission -->
    <div class="flex justify-center pt-6">
      <button
        type="submit"
        [disabled]="noteForm.invalid"
        class="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed font-medium"
      >
        <i class="fas fa-save mr-2"></i>
        {{ textButtonVOUp }} la note
      </button>
    </div>

    <!-- Messages -->
    <div
      *ngIf="successMessage"
      class="text-green-600 mt-4 text-center p-3 bg-green-50 rounded-lg"
    >
      <i class="fas fa-check-circle mr-2"></i> {{ successMessage }}
    </div>
    <div
      *ngIf="errorMessage"
      class="text-red-600 mt-4 text-center p-3 bg-red-50 rounded-lg"
    >
      <i class="fas fa-exclamation-circle mr-2"></i> {{ errorMessage }}
    </div>
  </form>
</div>
